<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WebSocket Learning Hub</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Fira+Code:wght@400;500&display=swap"
    rel="stylesheet" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg: #ffffff;
      --card: #f8fafc;
      --card2: #f1f5f9;
      --border: #e2e8f0;
      --text: #0f172a;
      --muted: #64748b;
      --dim: #475569;
      --green: #16a34a;
      --blue: #0284c7;
      --purple: #7c3aed;
      --yellow: #ca8a04;
      --red: #dc2626;
      --orange: #ea580c;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }

    .hero {
      text-align: center;
      padding: 64px 24px 48px;
      background: radial-gradient(ellipse 90% 60% at 50% -10%, rgba(56, 189, 248, .1), transparent);
      border-bottom: 1px solid var(--border);
    }


    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: rgba(56, 189, 248, .1);
      color: var(--blue);
      border: 1px solid rgba(56, 189, 248, .2);
      border-radius: 99px;
      padding: 5px 14px;
      font-size: .75rem;
      font-weight: 700;
      letter-spacing: .5px;
      text-transform: uppercase;
      margin-bottom: 20px;
    }

    .hero h1 {
      font-size: clamp(2rem, 6vw, 3.4rem);
      font-weight: 800;
      margin-bottom: 14px;
      background: linear-gradient(135deg, #e2e8f0 40%, #64748b);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero p {
      font-size: 1.05rem;
      color: var(--dim);
      max-width: 540px;
      margin: 0 auto 28px;
    }

    .stats {
      display: flex;
      gap: 24px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .stat {
      text-align: center;
    }

    .stat-num {
      font-size: 1.8rem;
      font-weight: 800;
      color: var(--blue);
      font-family: 'Fira Code', monospace;
    }

    .stat-label {
      font-size: .72rem;
      color: var(--muted);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: .5px;
    }

    .page {
      max-width: 900px;
      margin: 0 auto;
      padding: 44px 24px 60px;
    }

    .section-head {
      font-size: .72rem;
      font-weight: 700;
      letter-spacing: 1px;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 16px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border);
    }

    /* LESSON GRID */
    .lessons-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 14px;
      margin-bottom: 40px;
    }

    .lesson-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 18px;
      text-decoration: none;
      color: inherit;
      display: flex;
      flex-direction: column;
      gap: 10px;
      transition: border-color .25s, transform .2s, box-shadow .25s;
      position: relative;
      overflow: hidden;
    }

    .lesson-card::before {
      content: '';
      position: absolute;
      inset: 0;
      opacity: 0;
      transition: opacity .3s;
    }

    .lesson-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, .4);
      border-color: var(--card-color, var(--blue));
    }

    .lesson-card:hover::before {
      opacity: 1;
    }

    .card-top {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .lesson-num {
      width: 34px;
      height: 34px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: .82rem;
      font-weight: 800;
      flex-shrink: 0;
      background: var(--num-bg);
      color: var(--num-color);
    }

    .lesson-badge {
      font-size: .65rem;
      font-weight: 700;
      letter-spacing: .4px;
      text-transform: uppercase;
      padding: 2px 8px;
      border-radius: 99px;
      background: var(--badge-bg);
      color: var(--badge-color);
    }

    .lesson-title {
      font-size: .95rem;
      font-weight: 700;
      line-height: 1.3;
    }

    .lesson-desc {
      font-size: .79rem;
      color: var(--dim);
      line-height: 1.55;
      flex: 1;
    }

    .lesson-path {
      font-family: 'Fira Code', monospace;
      font-size: .67rem;
      color: var(--muted);
      background: var(--card3);
      border-radius: 5px;
      padding: 4px 8px;
      border: 1px solid var(--border);
      word-break: break-all;
      margin-top: 2px;
    }

    .lesson-footer {
      display: flex;
      align-items: center;
      gap: 8px;
      padding-top: 8px;
      border-top: 1px solid var(--border);
    }

    .open-btn {
      margin-left: auto;
      font-size: .72rem;
      font-weight: 600;
      color: var(--card-color, var(--blue));
      opacity: .7;
      transition: opacity .2s;
    }

    .lesson-card:hover .open-btn {
      opacity: 1;
    }

    /* ADVANCED SECTION */
    .advanced-card {
      background: var(--card);
      border: 1px solid rgba(167, 139, 250, .2);
      border-radius: 14px;
      padding: 20px 22px;
      text-decoration: none;
      color: inherit;
      display: flex;
      align-items: center;
      gap: 18px;
      transition: border-color .25s, transform .2s;
    }

    .advanced-card:hover {
      border-color: var(--purple);
      transform: translateY(-2px);
    }

    .adv-icon {
      font-size: 2rem;
      flex-shrink: 0;
    }

    .adv-title {
      font-weight: 700;
      font-size: 1rem;
      margin-bottom: 4px;
      color: var(--purple);
    }

    .adv-desc {
      font-size: .82rem;
      color: var(--dim);
      line-height: 1.5;
    }

    .adv-path {
      font-family: 'Fira Code', monospace;
      font-size: .67rem;
      color: var(--muted);
      margin-top: 6px;
      background: var(--card3);
      padding: 3px 8px;
      border-radius: 4px;
      display: inline-block;
    }

    .adv-arrow {
      margin-left: auto;
      font-size: 1.4rem;
      color: var(--purple);
      flex-shrink: 0;
    }

    /* QUICK REFERENCE */
    .ref-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 10px;
      margin-top: 0;
    }

    .ref-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 14px 16px;
      text-decoration: none;
      color: inherit;
      transition: border-color .2s;
    }

    .ref-card:hover {
      border-color: var(--blue);
    }

    .ref-icon {
      font-size: 1.3rem;
      margin-bottom: 6px;
    }

    .ref-title {
      font-size: .83rem;
      font-weight: 700;
      margin-bottom: 3px;
    }

    .ref-sub {
      font-size: .74rem;
      color: var(--muted);
      line-height: 1.4;
    }

    .ref-path {
      font-family: 'Fira Code', monospace;
      font-size: .63rem;
      color: var(--muted);
      margin-top: 6px;
    }

    /* SETTINGS UI */
    .settings-trigger {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 48px;
      height: 48px;
      background: var(--card2);
      border: 1px solid var(--border);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(0, 0, 0, .3);
      z-index: 100;
      transition: transform .2s;
    }

    .settings-trigger:hover {
      transform: rotate(30deg);
      border-color: var(--blue);
    }

    #settings-modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, .8);
      align-items: center;
      justify-content: center;
      z-index: 1000;
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
    }

    .modal-box {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      width: 90%;
      max-width: 400px;
      padding: 24px;
    }

    .modal-box h2 {
      font-size: 1.2rem;
      margin-bottom: 16px;
      color: var(--blue);
    }

    .modal-box p {
      font-size: .85rem;
      color: var(--dim);
      margin-bottom: 18px;
      line-height: 1.5;
    }

    .input-group {
      margin-bottom: 16px;
    }

    .input-group label {
      display: block;
      font-size: .7rem;
      font-weight: 700;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .input-group input {
      width: 100%;
      background: var(--card2);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 10px;
      color: var(--text);
      font-family: inherit;
    }

    .modal-btns {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .modal-btns button {
      flex: 1;
      padding: 10px;
      border-radius: 8px;
      border: none;
      font-weight: 700;
      cursor: pointer;
    }

    .save-btn {
      background: var(--blue);
      color: #082f49;
    }

    .cancel-btn {
      background: var(--card2);
      color: var(--text);
    }

    /* â”€â”€ MOBILE RESPONSIVE â”€â”€ */
    @media (max-width: 768px) {
      .hero h1 {
        font-size: 1.6rem !important;
      }

      .hero p {
        font-size: .88rem !important;
      }

      .page {
        padding: 24px 16px !important;
      }

      .two-col {
        grid-template-columns: 1fr !important;
      }

      .stats {
        flex-wrap: wrap;
        gap: 12px;
      }

      .code,
      pre {
        font-size: .7rem !important;
      }

      .nav-bar,
      [style*="justify-content:center"][style*="padding:24px"] {
        flex-direction: column;
        align-items: center;
      }
    }

    @media (max-width: 480px) {
      .hero {
        padding: 40px 16px 32px !important;
      }

      .hero h1 {
        font-size: 1.3rem !important;
      }

      section {
        margin-bottom: 24px !important;
      }
    }
  </style>
  <script src="config.js"></script>

  <script src="progress.js"></script>

</head>

<body>

  <div class="hero">
    <div class="status-bar">
      <div class="status-fill" id="statusFill"></div>
    </div>
    <div class="status-label" id="statusLabel">
      <div class="status-dot" id="statusDot"></div>
      Backend: Checking...
    </div>
    <div class="hero-badge">ğŸ“¡ WebSocket Learning Hub</div>
    <h1>Master WebSockets<br>Step by Step</h1>
    <p>28 interactive lessons â€” from zero to production-ready. Each lesson builds on the last.</p>
    <div class="stats">
      <div class="stat">
        <div class="stat-num">28</div>
        <div class="stat-label">Lessons</div>
      </div>
      <div class="stat">
        <div class="stat-num">4</div>
        <div class="stat-label">Patterns</div>
      </div>
      <div class="stat">
        <div class="stat-num">âˆ</div>
        <div class="stat-label">Live Demos</div>
      </div>
    </div> <!-- Close stats div properly -->

    <!-- ADVANCED PATTERNS CTA -->
    <a href="patterns.html"
      style="display:inline-flex;align-items:center;gap:10px;margin-top:28px;padding:12px 24px;background:rgba(124,58,237,.08);border:1px solid rgba(124,58,237,.25);border-radius:12px;color:var(--purple);text-decoration:none;font-weight:700;transition:transform .2s;box-shadow:0 4px 12px rgba(124,58,237,.06)">
      <span style="font-size:1.2rem">ğŸš€</span>
      Interactive Advanced Patterns Demo
      <span style="font-size:1.2rem">â†’</span>
    </a>

    <div id="progressSection" style="max-width:500px;margin:28px auto 0;padding:0 20px">
      <div style="display:flex;justify-content:space-between;font-size:.78rem;margin-bottom:6px">
        <span style="color:#94a3b8" id="progressLabel">0 / 28 lessons complete</span>
        <span style="color:var(--dim);font-weight:700" id="progressPercent">0%</span>
      </div>
      <div
        style="height:8px;border-radius:99px;background:rgba(255,255,255,0.02);overflow:hidden;border:1px solid rgba(255,255,255,0.06)">
        <div id="progressFill"
          style="height:100%;width:0%;border-radius:99px;background:rgba(255,255,255,0.2);transition:width .6s ease">
        </div>
      </div>
    </div>
  </div>
  </div>

  <div class="page">

    <div class="section-head">ğŸ“š All Lessons â€” Open in Order</div>

    <div class="lessons-grid">

      <a href="learn.html" class="lesson-card"
        style="--card-color:var(--text);--num-bg:rgba(56,189,248,.15);--num-color:var(--text);--badge-bg:rgba(56,189,248,.1);--badge-color:var(--text)">
        <div class="card-top">
          <div class="lesson-num">1</div>
          <div class="lesson-badge">Fundamentals</div>
        </div>
        <div class="lesson-title">WebSocket Basics & Lifecycle</div>
        <div class="lesson-desc">What WebSockets are, how they compare to HTTP, and the 4 lifecycle events: connect â†’
          open â†’ send/receive â†’ close.</div>
        <div class="lesson-path">learn.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ“ Phone call analogy</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn2.html" class="lesson-card"
        style="--card-color:var(--text);--num-bg:rgba(167,139,250,.15);--num-color:var(--text);--badge-bg:rgba(167,139,250,.1);--badge-color:var(--text)">
        <div class="card-top">
          <div class="lesson-num">2</div>
          <div class="lesson-badge">Event Listeners</div>
        </div>
        <div class="lesson-title">addEventListener vs onmessage</div>
        <div class="lesson-desc">Why <code style="font-family:monospace">addEventListener</code> allows multiple
          handlers while <code style="font-family:monospace">onmessage =</code> silently overwrites the previous one.
        </div>
        <div class="lesson-path">learn2.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ§ Radio analogy</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn3.html" class="lesson-card"
        style="--card-color:var(--text);--num-bg:rgba(251,191,36,.15);--num-color:var(--text);--badge-bg:rgba(251,191,36,.1);--badge-color:var(--text)">
        <div class="card-top">
          <div class="lesson-num">3</div>
          <div class="lesson-badge">Async Patterns</div>
        </div>
        <div class="lesson-title">Callbacks vs Async/Await</div>
        <div class="lesson-desc">Understand callback hell and why async/await makes asynchronous code clean, readable,
          and easy to debug.</div>
        <div class="lesson-path">learn3.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ“ Drive-thru analogy</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn4.html" class="lesson-card"
        style="--card-color:var(--dim);--num-bg:rgba(34,197,94,.15);--num-color:var(--dim);--badge-bg:rgba(34,197,94,.1);--badge-color:var(--dim)">
        <div class="card-top">
          <div class="lesson-num">4</div>
          <div class="lesson-badge">Mini Project</div>
        </div>
        <div class="lesson-title">Live Chat App</div>
        <div class="lesson-desc">Capstone â€” build a real chat app using everything from Lessons 1â€“3: lifecycle,
          addEventListener, and async/await together.</div>
        <div class="lesson-path">learn4.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ’¬ Real chat UI</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn5.html" class="lesson-card"
        style="--card-color:#f87171;--num-bg:rgba(248,113,113,.15);--num-color:#f87171;--badge-bg:rgba(248,113,113,.1);--badge-color:#f87171">
        <div class="card-top">
          <div class="lesson-num">5</div>
          <div class="lesson-badge">Error Handling</div>
        </div>
        <div class="lesson-title">Error Handling & Auto-Reconnect</div>
        <div class="lesson-desc">Close codes, exponential backoff reconnect strategy, and the golden rules every
          production WebSocket app must follow.</div>
        <div class="lesson-path">learn5.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ”„ Backoff visualiser</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn6.html" class="lesson-card"
        style="--card-color:var(--text);--num-bg:rgba(56,189,248,.15);--num-color:var(--text);--badge-bg:rgba(56,189,248,.1);--badge-color:var(--text)">
        <div class="card-top">
          <div class="lesson-num">6</div>
          <div class="lesson-badge">Broadcasting</div>
        </div>
        <div class="lesson-title">Broadcasting to All Clients</div>
        <div class="lesson-desc">How the server forwards one message to every connected client using <code
            style="font-family:monospace">wss.clients.forEach()</code> â€” the engine of live feeds.</div>
        <div class="lesson-path">learn6.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ“¢ 3-client demo</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn7.html" class="lesson-card"
        style="--card-color:var(--text);--num-bg:rgba(167,139,250,.15);--num-color:var(--text);--badge-bg:rgba(167,139,250,.1);--badge-color:var(--text)">
        <div class="card-top">
          <div class="lesson-num">7</div>
          <div class="lesson-badge">Rooms</div>
        </div>
        <div class="lesson-title">Rooms & Channels</div>
        <div class="lesson-desc">Route messages only to clients in the same room using a Map of Sets â€” the foundation of
          Slack channels and Discord servers.</div>
        <div class="lesson-path">learn7.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ  #general / #sports</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn8.html" class="lesson-card"
        style="--card-color:var(--text);--num-bg:rgba(251,191,36,.15);--num-color:var(--text);--badge-bg:rgba(251,191,36,.1);--badge-color:var(--text)">
        <div class="card-top">
          <div class="lesson-num">8</div>
          <div class="lesson-badge">Security</div>
        </div>
        <div class="lesson-title">Authentication with WebSockets</div>
        <div class="lesson-desc">Verify who's connecting using token query strings, JWT flow, and custom close codes
          (4001 Unauthorized).</div>
        <div class="lesson-path">learn8.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ” Token simulator</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <!-- â”€â”€ NEW: Lessons 9-12 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <a href="learn9.html" class="lesson-card"
        style="--card-color:var(--dim);--num-bg:rgba(34,197,94,.15);--num-color:var(--dim);--badge-bg:rgba(34,197,94,.1);--badge-color:var(--dim)">
        <div class="card-top">
          <div class="lesson-num">9</div>
          <div class="lesson-badge">Heartbeat</div>
        </div>
        <div class="lesson-title">Heartbeat & Ping-Pong â¤ï¸</div>
        <div class="lesson-desc">Keep connections alive past load-balancer idle timeouts with server-sent pings and pong
          tracking.</div>
        <div class="lesson-path">learn9.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ’“ Live timeline demo</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn10.html" class="lesson-card"
        style="--card-color:var(--text);--num-bg:rgba(56,189,248,.15);--num-color:var(--text);--badge-bg:rgba(56,189,248,.1);--badge-color:var(--text)">
        <div class="card-top">
          <div class="lesson-num">10</div>
          <div class="lesson-badge">Binary</div>
        </div>
        <div class="lesson-title">Binary Data & File Transfer ğŸ“¦</div>
        <div class="lesson-desc">Send ArrayBuffer and Blob over WebSocket â€” drop a file and see the raw hex bytes.</div>
        <div class="lesson-path">learn10.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ—‚ï¸ File drop demo</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn11.html" class="lesson-card"
        style="--card-color:var(--text);--num-bg:rgba(167,139,250,.15);--num-color:var(--text);--badge-bg:rgba(167,139,250,.1);--badge-color:var(--text)">
        <div class="card-top">
          <div class="lesson-num">11</div>
          <div class="lesson-badge">Scaling</div>
        </div>
        <div class="lesson-title">Scaling with Redis Pub/Sub âš¡</div>
        <div class="lesson-desc">Use Redis as a message bus so multiple Node.js servers share the same broadcast
          channel.</div>
        <div class="lesson-path">learn11.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ–¥ï¸ 3-server simulator</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn12.html" class="lesson-card"
        style="--card-color:var(--text);--num-bg:rgba(251,191,36,.15);--num-color:var(--text);--badge-bg:rgba(251,191,36,.1);--badge-color:var(--text)">
        <div class="card-top">
          <div class="lesson-num">12</div>
          <div class="lesson-badge">Comparison</div>
        </div>
        <div class="lesson-title">WS vs SSE vs Long Polling ğŸ”€</div>
        <div class="lesson-desc">Full comparison table and decision tree â€” choose the right real-time transport for your
          use case.</div>
        <div class="lesson-path">learn12.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ“Š Decision tree</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <!-- â”€â”€ Intermediate (13-18) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div style="grid-column:1/-1;margin-top:8px">
        <div
          style="font-size:.72rem;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--border)">
          âš¡ Intermediate â€” Lessons 13â€“18</div>
      </div>

      <a href="learn13.html" class="lesson-card"
        style="--card-color:#fb923c;--num-bg:rgba(251,146,60,.15);--num-color:#fb923c;--badge-bg:rgba(251,146,60,.1);--badge-color:#fb923c">
        <div class="card-top">
          <div class="lesson-num">13</div>
          <div class="lesson-badge">Rate Limiting</div>
        </div>
        <div class="lesson-title">Rate Limiting & Throttling ğŸ›¡ï¸</div>
        <div class="lesson-desc">Token Bucket algorithm â€” protect your server from message flooding and DoS attacks.
        </div>
        <div class="lesson-path">learn13.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ® Token bucket
            visualizer</span><span class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn14.html" class="lesson-card"
        style="--card-color:var(--text);--num-bg:rgba(56,189,248,.15);--num-color:var(--text);--badge-bg:rgba(56,189,248,.1);--badge-color:var(--text)">
        <div class="card-top">
          <div class="lesson-num">14</div>
          <div class="lesson-badge">Express+WS</div>
        </div>
        <div class="lesson-title">Shared Express + WS Server âš¡</div>
        <div class="lesson-desc">Mount WebSocket on an existing Express app â€” HTTP and WS on the same port 3000.</div>
        <div class="lesson-path">learn14.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ”— Same-port setup</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn15.html" class="lesson-card"
        style="--card-color:var(--dim);--num-bg:rgba(34,197,94,.15);--num-color:var(--dim);--badge-bg:rgba(34,197,94,.1);--badge-color:var(--dim)">
        <div class="card-top">
          <div class="lesson-num">15</div>
          <div class="lesson-badge">Presence</div>
        </div>
        <div class="lesson-title">Presence System ğŸŸ¢</div>
        <div class="lesson-desc">Track who's online with a Map-based user registry. Broadcast join/leave events.</div>
        <div class="lesson-path">learn15.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ‘¥ Live online list</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn16.html" class="lesson-card"
        style="--card-color:var(--text);--num-bg:rgba(167,139,250,.15);--num-color:var(--text);--badge-bg:rgba(167,139,250,.1);--badge-color:var(--text)">
        <div class="card-top">
          <div class="lesson-num">16</div>
          <div class="lesson-badge">Typing</div>
        </div>
        <div class="lesson-title">Typing Indicators âŒ¨ï¸</div>
        <div class="lesson-desc">Debounced "Alice is typingâ€¦" â€” send events efficiently, stop after 2s inactivity.</div>
        <div class="lesson-path">learn16.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ’¬ Two-user typing demo</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn17.html" class="lesson-card"
        style="--card-color:var(--text);--num-bg:rgba(251,191,36,.15);--num-color:var(--text);--badge-bg:rgba(251,191,36,.1);--badge-color:var(--text)">
        <div class="card-top">
          <div class="lesson-num">17</div>
          <div class="lesson-badge">History</div>
        </div>
        <div class="lesson-title">Message History & Replay ğŸ“œ</div>
        <div class="lesson-desc">Ring buffer â€” store last 50 messages, replay to every new connection on join.</div>
        <div class="lesson-path">learn17.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ”„ New connection
            replay</span><span class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn18.html" class="lesson-card"
        style="--card-color:#fb923c;--num-bg:rgba(251,146,60,.15);--num-color:#fb923c;--badge-bg:rgba(251,146,60,.1);--badge-color:#fb923c">
        <div class="card-top">
          <div class="lesson-num">18</div>
          <div class="lesson-badge">Offline</div>
        </div>
        <div class="lesson-title">Offline Queue ğŸ“¬</div>
        <div class="lesson-desc">Buffer messages while disconnected, flush automatically on reconnect.</div>
        <div class="lesson-path">learn18.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ”Œ Go offline demo</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <!-- â”€â”€ Advanced (19-24) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div style="grid-column:1/-1;margin-top:8px">
        <div
          style="font-size:.72rem;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--border)">
          ğŸ”¥ Advanced â€” Lessons 19â€“24</div>
      </div>

      <a href="learn19.html" class="lesson-card"
        style="--card-color:#06b6d4;--num-bg:rgba(6,182,212,.15);--num-color:#06b6d4;--badge-bg:rgba(6,182,212,.1);--badge-color:#06b6d4">
        <div class="card-top">
          <div class="lesson-num">19</div>
          <div class="lesson-badge">React</div>
        </div>
        <div class="lesson-title">WebSocket with React âš›ï¸</div>
        <div class="lesson-desc">useWebSocket custom hook â€” create once, cleanup on unmount, prevent memory leaks.</div>
        <div class="lesson-path">learn19.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸª Custom hook pattern</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn20.html" class="lesson-card"
        style="--card-color:#f8fafc;--num-bg:rgba(248,250,252,.1);--num-color:#f8fafc;--badge-bg:rgba(248,250,252,.08);--badge-color:#f8fafc">
        <div class="card-top">
          <div class="lesson-num">20</div>
          <div class="lesson-badge">Socket.io</div>
        </div>
        <div class="lesson-title">Socket.io âš¡</div>
        <div class="lesson-desc">Rooms, namespaces, auto-reconnect, Redis adapter â€” and when to use raw ws instead.
        </div>
        <div class="lesson-path">learn20.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ“Š WS vs Socket.io
            table</span><span class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn21.html" class="lesson-card"
        style="--card-color:#f87171;--num-bg:rgba(248,113,113,.15);--num-color:#f87171;--badge-bg:rgba(248,113,113,.1);--badge-color:#f87171">
        <div class="card-top">
          <div class="lesson-num">21</div>
          <div class="lesson-badge">Security</div>
        </div>
        <div class="lesson-title">WebSocket Security ğŸ”’</div>
        <div class="lesson-desc">Origin validation, message sanitization, TLS (wss://), DoS prevention checklist.</div>
        <div class="lesson-path">learn21.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ›¡ï¸ 4 attack vectors</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn22.html" class="lesson-card"
        style="--card-color:#3178c6;--num-bg:rgba(49,120,198,.15);--num-color:#3178c6;--badge-bg:rgba(49,120,198,.1);--badge-color:#3178c6">
        <div class="card-top">
          <div class="lesson-num">22</div>
          <div class="lesson-badge">TypeScript</div>
        </div>
        <div class="lesson-title">TypeScript + WebSocket ğŸŸ¦</div>
        <div class="lesson-desc">Discriminated unions, Zod runtime validation â€” full type safety end to end.</div>
        <div class="lesson-path">learn22.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ”· Type-safe messages</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn23.html" class="lesson-card"
        style="--card-color:var(--text);--num-bg:rgba(167,139,250,.15);--num-color:var(--text);--badge-bg:rgba(167,139,250,.1);--badge-color:var(--text)">
        <div class="card-top">
          <div class="lesson-num">23</div>
          <div class="lesson-badge">Collab Edit</div>
        </div>
        <div class="lesson-title">Collaborative Editing ğŸ“</div>
        <div class="lesson-desc">OT basics, conflict resolution â€” when to use Yjs for real collaborative apps.</div>
        <div class="lesson-path">learn23.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">âœï¸ Live two-editor demo</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn24.html" class="lesson-card"
        style="--card-color:#fb923c;--num-bg:rgba(251,146,60,.15);--num-color:#fb923c;--badge-bg:rgba(251,146,60,.1);--badge-color:#fb923c">
        <div class="card-top">
          <div class="lesson-num">24</div>
          <div class="lesson-badge">WebRTC</div>
        </div>
        <div class="lesson-title">WebRTC Signaling ğŸ“¹</div>
        <div class="lesson-desc">WebSocket as the signaling channel for peer-to-peer video/audio connections via
          SDP/ICE.</div>
        <div class="lesson-path">learn24.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ“¡ P2P signaling flow</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <!-- â”€â”€ Testing & Production (25-28) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div style="grid-column:1/-1;margin-top:8px">
        <div
          style="font-size:.72rem;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--border)">
          ğŸ­ Testing & Production â€” Lessons 25â€“28</div>
      </div>

      <a href="learn25.html" class="lesson-card"
        style="--card-color:var(--dim);--num-bg:rgba(34,197,94,.15);--num-color:var(--dim);--badge-bg:rgba(34,197,94,.1);--badge-color:var(--dim)">
        <div class="card-top">
          <div class="lesson-num">25</div>
          <div class="lesson-badge">Testing</div>
        </div>
        <div class="lesson-title">Testing WebSockets ğŸ§ª</div>
        <div class="lesson-desc">Integration tests with real ws client, unit tests with jest.fn() mock ws objects.</div>
        <div class="lesson-path">learn25.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">âœ… Jest patterns</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn26.html" class="lesson-card"
        style="--card-color:var(--text);--num-bg:rgba(56,189,248,.15);--num-color:var(--text);--badge-bg:rgba(56,189,248,.1);--badge-color:var(--text)">
        <div class="card-top">
          <div class="lesson-num">26</div>
          <div class="lesson-badge">Monitoring</div>
        </div>
        <div class="lesson-title">Monitoring & Logging ğŸ“Š</div>
        <div class="lesson-desc">JSON structured logs, /metrics endpoint for Prometheus/Grafana, alerting rules.</div>
        <div class="lesson-path">learn26.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ“ˆ Live dashboard demo</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn27.html" class="lesson-card"
        style="--card-color:var(--text);--num-bg:rgba(251,191,36,.15);--num-color:var(--text);--badge-bg:rgba(251,191,36,.1);--badge-color:var(--text)">
        <div class="card-top">
          <div class="lesson-num">27</div>
          <div class="lesson-badge">Load Test</div>
        </div>
        <div class="lesson-title">Load Testing âš¡</div>
        <div class="lesson-desc">Artillery config, benchmark scripts â€” how many concurrent connections can your server
          handle?</div>
        <div class="lesson-path">learn27.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--muted)">ğŸ”« Artillery + scripts</span><span
            class="open-btn">Open â†’</span></div>
      </a>

      <a href="learn28.html" class="lesson-card"
        style="--card-color:var(--dim);--num-bg:rgba(34,197,94,.15);--num-color:var(--dim);--badge-bg:rgba(34,197,94,.1);--badge-color:var(--dim);border-color:rgba(34,197,94,.3)">
        <div class="card-top">
          <div class="lesson-num">28</div>
          <div class="lesson-badge" style="background:rgba(255,255,255,.03);color:var(--dim)">ğŸ† Final</div>
        </div>
        <div class="lesson-title">Deployment ğŸš€</div>
        <div class="lesson-desc">Docker, nginx WS config, AWS ALB sticky sessions, graceful shutdown â€” full production
          checklist.</div>
        <div class="lesson-path">learn28.html</div>
        <div class="lesson-footer"><span style="font-size:.72rem;color:var(--green)">ğŸ“ Course Complete!</span><span
            class="open-btn">Open â†’</span></div>
      </a>

    </div>

    <div class="section-head" style="margin-top:8px">ğŸš€ Advanced Demo</div>

    <a href="client.html" class="advanced-card" style="margin-bottom:36px">
      <div class="adv-icon">ğŸ“</div>
      <div>
        <div class="adv-title">WebSocket Teaching Mode</div>
        <div class="adv-desc">Interactive demo of all 4 patterns (addEventListener, onmessage, callbacks, async/await)
          with live code highlighting and step-by-step walkthroughs. Requires <code
            style="font-family:monospace">node server.js</code> running.</div>
        <div class="adv-path">client.html</div>
      </div>
      <div class="adv-arrow">â†’</div>
    </a>

    <div class="section-head">ğŸ“ Quick Reference</div>

    <div class="ref-grid">
      <a href="WEBSOCKET_STUDY_NOTES.md" class="ref-card">
        <div class="ref-icon">ğŸ“š</div>
        <div class="ref-title">Study Notes</div>
        <div class="ref-sub">All concepts, cheatsheets, and code patterns in one file</div>
        <div class="ref-path">WEBSOCKET_STUDY_NOTES.md</div>
      </a>
      <a href="server.js" class="ref-card">
        <div class="ref-icon">âš™ï¸</div>
        <div class="ref-title">Server Code</div>
        <div class="ref-sub">Node.js WebSocket server â€” run with <code
            style="font-family:monospace">node server.js</code></div>
        <div class="ref-path">server.js</div>
      </a>
    </div>

    <div
      style="margin-top:36px;padding:18px;background:transparent;border:1px solid rgba(255,255,255,0.06);border-radius:12px;">
      <div
        style="font-size:.75rem;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;margin-bottom:10px">
        ğŸ“ Local File Paths</div>
      <div style="font-family:'Fira Code',monospace;font-size:.72rem;color:var(--dim);line-height:2">
        C:\Users\Anudeep\Desktop\WS-project-backend\<span style="color:var(--green)">index.html</span> &nbsp;â† This
        page<br>
        C:\Users\Anudeep\Desktop\WS-project-backend\<span style="color:var(--blue)">learn.html &nbsp;&nbsp;</span> â†
        Lesson
        1<br>
        C:\Users\Anudeep\Desktop\WS-project-backend\<span style="color:var(--blue)">learn2.html</span> â† Lesson 2<br>
        C:\Users\Anudeep\Desktop\WS-project-backend\<span style="color:var(--blue)">learn3.html</span> â† Lesson 3<br>
        C:\Users\Anudeep\Desktop\WS-project-backend\<span style="color:var(--blue)">learn4.html</span> â† Lesson 4<br>
        C:\Users\Anudeep\Desktop\WS-project-backend\<span style="color:var(--blue)">learn5.html</span> â† Lesson 5<br>
        C:\Users\Anudeep\Desktop\WS-project-backend\<span style="color:var(--blue)">learn6.html</span> â† Lesson 6<br>
        C:\Users\Anudeep\Desktop\WS-project-backend\<span style="color:var(--blue)">learn7.html</span> â† Lesson 7<br>
        C:\Users\Anudeep\Desktop\WS-project-backend\<span style="color:var(--blue)">learn8.html</span> â† Lesson 8<br>
        C:\Users\Anudeep\Desktop\WS-project-backend\<span style="color:var(--purple)">client.html</span> â† Advanced
        Demo<br>
        C:\Users\Anudeep\Desktop\WS-project-backend\<span style="color:var(--yellow)">server.js &nbsp;&nbsp;</span> â†
        WebSocket Server
      </div>
    </div>

  </div>

  <!-- SETTINGS TRIGGER -->
  <div class="settings-trigger" onclick="toggleModal(true)" title="Server Settings">âš™ï¸</div>

  <!-- SETTINGS MODAL -->
  <div id="settings-modal" onclick="if(event.target === this) toggleModal(false)">
    <div class="modal-box">
      <div style="display:flex; justify-content:space-between; align-items:flex-start">
        <h2>Server Settings âš™ï¸</h2>
        <button onclick="toggleModal(false)"
          style="background:none; border:none; color:var(--muted); cursor:pointer; font-size:1.2rem">&times;</button>
      </div>

      <p>By default, lessons connect to <strong>localhost:8080</strong>. To connect from a <strong>mobile phone</strong>
        or another laptop, you must use your PC's <strong>Local IP Address</strong>.</p>

      <div
        style="background:rgba(2, 132, 199, 0.05); border:1px border dashed var(--blue); border-radius:8px; padding:12px; margin-bottom:18px">
        <div style="font-size:.7rem; font-weight:700; color:var(--blue); text-transform:uppercase; margin-bottom:6px">ğŸ’¡
          How to find your Local IP (Windows)</div>
        <ol style="font-size:.75rem; color:var(--dim); padding-left:18px">
          <li>Open <strong>PowerShell</strong> or CMD</li>
          <li>Type <code
              style="background:var(--card2); padding:2px 4px; border-radius:4px; font-family:monospace">ipconfig</code>
            and press Enter</li>
          <li>Look for <strong>IPv4 Address</strong> (e.g., 192.168.1.5)</li>
          <li>Use it below <strong>with port 8080</strong>: <code style="opacity:.7">ws://192.168.1.5:8080</code></li>
        </ol>
      </div>

      <div class="input-group">
        <label>WebSocket Server URL</label>
        <input type="text" id="ws-input" placeholder="e.g. ws://192.168.x.x:8080" />
      </div>

      <div class="modal-btns">
        <button class="cancel-btn" onclick="toggleModal(false)">Cancel</button>
        <button class="save-btn" onclick="saveSettings()">Save Configuration</button>
      </div>
      <button class="cancel-btn" style="margin-top:10px; width:100%; opacity:.6; font-size:.7rem"
        onclick="clearSettings()">Reset to Localhost</button>
    </div>
  </div>

  <script>
    const modal = document.getElementById('settings-modal');
    const input = document.getElementById('ws-input');

    function toggleModal(show) {
      modal.style.display = show ? 'flex' : 'none';
      if (show) input.value = localStorage.getItem('ws_server_url') || '';
    }

    function saveSettings() {
      let val = input.value.trim();
      if (val) {
        // Validation: ensure it starts with ws:// or wss:// or fix it
        if (!val.startsWith('ws://') && !val.startsWith('wss://')) {
          val = 'ws://' + val;
        }
        localStorage.setItem('ws_server_url', val);
        alert('âœ… Configuration saved!\nTarget: ' + val + '\n\nAll lessons will now use this backend.');
        location.reload(); // Reload to apply changes immediately
      } else {
        localStorage.removeItem('ws_server_url');
        toggleModal(false);
      }
    }

    function clearSettings() {
      localStorage.removeItem('ws_server_url');
      alert('ğŸ”„ Reset to default (localhost:8080)');
      location.reload();
    }
  </script>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Update progress bar
      const stats = WSProgress.getStats(28);
      document.getElementById('progressLabel').textContent = stats.completed + ' / 28 lessons complete';
      document.getElementById('progressPercent').textContent = stats.percent + '%';
      document.getElementById('progressFill').style.width = stats.percent + '%';

      // Backend Connection Check
      const statusLabel = document.getElementById('statusLabel');
      const statusDot = document.getElementById('statusDot');
      const statusFill = document.getElementById('statusFill');
      const targetUrl = window.getWsUrl();

      function updateStatus(status) {
        if (!statusLabel || !statusFill) return;
        if (status === 'connecting') {
          statusLabel.innerHTML = `<div class="status-dot" id="statusDot" style="background:var(--yellow)"></div> Connecting to ${targetUrl}...`;
          statusFill.style.width = '30%';
          statusFill.style.background = 'var(--yellow)';
        } else if (status === 'connected') {
          statusLabel.innerHTML = `<div class="status-dot" id="statusDot" style="background:var(--green)"></div> Backend: Connected to ${targetUrl}`;
          statusFill.style.width = '100%';
          statusFill.style.background = 'var(--green)';
        } else {
          statusLabel.innerHTML = `<div class="status-dot" id="statusDot" style="background:var(--red)"></div> Backend: Disconnected. Check your Settings.`;
          statusFill.style.width = '10%';
          statusFill.style.background = 'var(--red)';
        }
      }

      updateStatus('connecting');
      const checkSocket = new WebSocket(targetUrl);
      checkSocket.onopen = () => {
        updateStatus('connected');
        checkSocket.close();
      };
      checkSocket.onerror = () => {
        updateStatus('error');
      };

      // Add checkmarks to lesson cards
      const completed = WSProgress.getCompleted();
      document.querySelectorAll('a[class*="card"]').forEach(card => {
        const href = card.getAttribute('href');
        if (!href) return;
        // Extract lesson number from href
        const match = href.match(/learn(\d*)\.html/);
        if (match) {
          const num = match[1] === '' ? 1 : parseInt(match[1]);
          if (completed.has(num)) {
            // Add checkmark badge
            const badge = document.createElement('div');
            badge.style.cssText = 'position:absolute;top:8px;right:8px;background:#22c55e;color:#052e16;border-radius:50%;width:22px;height:22px;display:flex;align-items:center;justify-content:center;font-size:.7rem;font-weight:700;z-index:2';
            badge.textContent = 'âœ“';
            card.style.position = 'relative';
            card.appendChild(badge);
          }
        }
      });
    });
  </script>
</body>

</html>